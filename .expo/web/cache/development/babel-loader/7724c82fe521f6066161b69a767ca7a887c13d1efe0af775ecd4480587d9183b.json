{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nconst _excluded = [\"initialPosition\", \"onCalendarToggled\", \"disablePan\", \"hideKnob\", \"leftArrowImageSource\", \"rightArrowImageSource\", \"allowShadow\", \"disableWeekScroll\", \"openThreshold\", \"closeThreshold\", \"closeOnDayPress\", \"horizontal\", \"calendarStyle\", \"theme\", \"style\", \"firstDay\", \"onDayPress\", \"hideArrows\", \"onPressArrowLeft\", \"onPressArrowRight\", \"renderArrow\", \"testID\"];\nvar _jsxFileName = \"/Users/recep/Gym/node_modules/react-native-calendars/src/expandableCalendar/index.js\";\nimport first from 'lodash/first';\nimport isFunction from 'lodash/isFunction';\nimport isNumber from 'lodash/isNumber';\nimport throttle from 'lodash/throttle';\nimport XDate from 'xdate';\nimport React, { useContext, useRef, useState, useEffect, useCallback, useMemo } from 'react';\nimport AccessibilityInfo from \"react-native-web/dist/exports/AccessibilityInfo\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { page } from '../dateutils';\nimport { parseDate, toMarkingFormat } from '../interface';\nimport styleConstructor, { KNOB_CONTAINER_HEIGHT } from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport Calendar from '../calendar';\nimport CalendarList from '../calendar-list';\nimport Week from './week';\nimport WeekCalendar from './WeekCalendar';\nimport Context from './Context';\nimport constants from '../commons/constants';\nimport { UpdateSources } from './commons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var Positions;\n(function (Positions) {\n  Positions[\"CLOSED\"] = \"closed\";\n  Positions[\"OPEN\"] = \"open\";\n})(Positions || (Positions = {}));\nconst SPEED = 20;\nconst BOUNCINESS = 6;\nconst WEEK_HEIGHT = 46;\nconst DAY_NAMES_PADDING = 24;\nconst PAN_GESTURE_THRESHOLD = 30;\nconst LEFT_ARROW = require('../calendar/img/previous.png');\nconst RIGHT_ARROW = require('../calendar/img/next.png');\nconst knobHitSlop = {\n  left: 10,\n  right: 10,\n  top: 10,\n  bottom: 10\n};\nconst headerStyleOverride = {\n  stylesheet: {\n    calendar: {\n      header: {\n        week: {\n          marginTop: 7,\n          marginBottom: -4,\n          flexDirection: 'row',\n          justifyContent: 'space-around'\n        }\n      }\n    }\n  }\n};\nconst ExpandableCalendar = props => {\n  const {\n    date,\n    setDate,\n    numberOfDays,\n    timelineLeftInset\n  } = useContext(Context);\n  const {\n      initialPosition = Positions.CLOSED,\n      onCalendarToggled,\n      disablePan,\n      hideKnob = numberOfDays && numberOfDays > 1,\n      leftArrowImageSource = LEFT_ARROW,\n      rightArrowImageSource = RIGHT_ARROW,\n      allowShadow = true,\n      disableWeekScroll,\n      openThreshold = PAN_GESTURE_THRESHOLD,\n      closeThreshold = PAN_GESTURE_THRESHOLD,\n      closeOnDayPress = true,\n      horizontal = true,\n      calendarStyle,\n      theme,\n      style: propsStyle,\n      firstDay = 0,\n      onDayPress,\n      hideArrows,\n      onPressArrowLeft,\n      onPressArrowRight,\n      renderArrow,\n      testID\n    } = props,\n    others = _objectWithoutPropertiesLoose(props, _excluded);\n  const [screenReaderEnabled, setScreenReaderEnabled] = useState(false);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const onHeaderLayout = useCallback(({\n    nativeEvent: {\n      layout: {\n        height\n      }\n    }\n  }) => {\n    setHeaderHeight(height);\n  }, []);\n  const getYear = date => {\n    const d = new XDate(date);\n    return d.getFullYear();\n  };\n  const getMonth = date => {\n    const d = new XDate(date);\n    return d.getMonth() + 1;\n  };\n  const visibleMonth = useRef(getMonth(date));\n  const visibleYear = useRef(getYear(date));\n  const isLaterDate = (date1, date2) => {\n    if (date1 && date2) {\n      if (date1.year > getYear(date2)) {\n        return true;\n      }\n      if (date1.year === getYear(date2)) {\n        if (date1.month > getMonth(date2)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  useEffect(() => {\n    scrollToDate(date);\n  }, [date]);\n  const getNumberOfWeeksInMonth = month => {\n    const days = page(new XDate(month), firstDay);\n    return days.length / 7;\n  };\n  const numberOfWeeks = useRef(getNumberOfWeeksInMonth(date));\n  const [position, setPosition] = useState(numberOfDays ? Positions.CLOSED : initialPosition);\n  const isOpen = position === Positions.OPEN;\n  const getOpenHeight = () => {\n    if (!horizontal) {\n      return Math.max(constants.screenHeight, constants.screenWidth);\n    }\n    return headerHeight + WEEK_HEIGHT * numberOfWeeks.current + (hideKnob ? 0 : KNOB_CONTAINER_HEIGHT);\n  };\n  const openHeight = useRef(getOpenHeight());\n  const closedHeight = useMemo(() => headerHeight + WEEK_HEIGHT + (hideKnob || Number(numberOfDays) > 1 ? 0 : KNOB_CONTAINER_HEIGHT), [numberOfDays, hideKnob, headerHeight]);\n  const startHeight = useMemo(() => isOpen ? openHeight.current : closedHeight, [closedHeight, isOpen]);\n  const _height = useRef(startHeight);\n  const deltaY = useMemo(() => new Animated.Value(startHeight), [startHeight]);\n  const headerDeltaY = useRef(new Animated.Value(isOpen ? -headerHeight : 0));\n  useEffect(() => {\n    _height.current = startHeight;\n    deltaY.setValue(startHeight);\n  }, [startHeight]);\n  useEffect(() => {\n    openHeight.current = getOpenHeight();\n  }, [headerHeight]);\n  useEffect(() => {\n    if (numberOfDays) {\n      setPosition(Positions.CLOSED);\n    }\n  }, [numberOfDays]);\n  const wrapper = useRef();\n  const calendarList = useRef();\n  const header = useRef();\n  const weekCalendarWrapper = useRef();\n  const style = useRef(styleConstructor(theme));\n  const themeObject = Object.assign(headerStyleOverride, theme);\n  const _wrapperStyles = useRef({\n    style: {\n      height: startHeight\n    }\n  });\n  const _headerStyles = {\n    style: {\n      top: isOpen ? -headerHeight : 0\n    }\n  };\n  const _weekCalendarStyles = {\n    style: {\n      opacity: isOpen ? 0 : 1\n    }\n  };\n  const shouldHideArrows = !horizontal ? true : hideArrows || false;\n  const updateNativeStyles = () => {\n    wrapper?.current?.setNativeProps(_wrapperStyles.current);\n    if (!horizontal) {\n      header?.current?.setNativeProps(_headerStyles);\n    } else {\n      weekCalendarWrapper?.current?.setNativeProps(_weekCalendarStyles);\n    }\n  };\n  const weekDaysStyle = useMemo(() => {\n    const leftPaddings = calendarStyle?.paddingLeft;\n    const rightPaddings = calendarStyle?.paddingRight;\n    return [style.current.weekDayNames, {\n      paddingLeft: isNumber(leftPaddings) ? leftPaddings + 6 : DAY_NAMES_PADDING,\n      paddingRight: isNumber(rightPaddings) ? rightPaddings + 6 : DAY_NAMES_PADDING\n    }];\n  }, [calendarStyle]);\n  const animatedHeaderStyle = useMemo(() => {\n    return [style.current.header, {\n      height: headerHeight,\n      top: headerDeltaY.current\n    }];\n  }, [headerDeltaY.current, headerHeight]);\n  const weekCalendarStyle = useMemo(() => {\n    return [style.current.weekContainer, isOpen ? style.current.hidden : style.current.visible, {\n      top: headerHeight\n    }];\n  }, [isOpen, headerHeight]);\n  const containerStyle = useMemo(() => {\n    return [allowShadow && style.current.containerShadow, propsStyle, headerHeight === 0 && style.current.hidden];\n  }, [allowShadow, propsStyle, headerHeight]);\n  const wrapperStyle = useMemo(() => {\n    return {\n      height: deltaY\n    };\n  }, [deltaY]);\n  const numberOfDaysHeaderStyle = useMemo(() => {\n    if (numberOfDays && numberOfDays > 1) {\n      return {\n        paddingHorizontal: 0\n      };\n    }\n  }, [numberOfDays]);\n  const _headerStyle = useMemo(() => {\n    return [numberOfDaysHeaderStyle, props.headerStyle];\n  }, [props.headerStyle, numberOfDaysHeaderStyle]);\n  useEffect(() => {\n    if (AccessibilityInfo) {\n      if (AccessibilityInfo.isScreenReaderEnabled) {\n        AccessibilityInfo.isScreenReaderEnabled().then(handleScreenReaderStatus);\n      } else if (AccessibilityInfo.fetch) {\n        AccessibilityInfo.fetch().then(handleScreenReaderStatus);\n      }\n    }\n  }, []);\n  const handleScreenReaderStatus = screenReaderEnabled => {\n    setScreenReaderEnabled(screenReaderEnabled);\n  };\n  const scrollToDate = date => {\n    if (!horizontal) {\n      calendarList?.current?.scrollToDay(date, 0, true);\n    } else if (getYear(date) !== visibleYear.current || getMonth(date) !== visibleMonth.current) {\n      calendarList?.current?.scrollToMonth(date);\n    }\n  };\n  const scrollPage = useCallback(next => {\n    if (horizontal) {\n      const d = parseDate(date);\n      if (isOpen) {\n        d.setDate(1);\n        d.addMonths(next ? 1 : -1);\n      } else {\n        let dayOfTheWeek = d.getDay();\n        if (dayOfTheWeek < firstDay && firstDay > 0) {\n          dayOfTheWeek = 7 + dayOfTheWeek;\n        }\n        if (numberOfDays) {\n          const daysToAdd = numberOfDays <= 1 ? 7 : numberOfDays;\n          d.addDays(next ? daysToAdd : -daysToAdd);\n        } else {\n          const firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n          d.addDays(firstDayOfWeek);\n        }\n      }\n      setDate?.(toMarkingFormat(d), UpdateSources.PAGE_SCROLL);\n    }\n  }, [horizontal, isOpen, firstDay, numberOfDays, setDate, date]);\n  const handleMoveShouldSetPanResponder = (_, gestureState) => {\n    if (disablePan) {\n      return false;\n    }\n    if (!horizontal && isOpen) {\n      return false;\n    }\n    if (!isOpen && gestureState.dy < 0) {\n      return false;\n    }\n    return gestureState.dy > 5 || gestureState.dy < -5;\n  };\n  const handlePanResponderMove = (_, gestureState) => {\n    _wrapperStyles.current.style.height = Math.min(Math.max(closedHeight, _height.current + gestureState.dy), openHeight.current);\n    if (!horizontal) {\n      _headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -headerHeight), 0);\n    } else {\n      if (!isOpen) {\n        _weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n      } else if (gestureState.dy < 0) {\n        _weekCalendarStyles.style.opacity = Math.max(0, Math.min(Math.abs(gestureState.dy / 200), 1));\n      }\n    }\n    updateNativeStyles();\n  };\n  const handlePanResponderEnd = () => {\n    _height.current = Number(_wrapperStyles.current.style.height);\n    bounceToPosition();\n  };\n  const numberOfDaysCondition = useMemo(() => {\n    return !numberOfDays || numberOfDays && numberOfDays <= 1;\n  }, [numberOfDays]);\n  const panResponder = useMemo(() => numberOfDaysCondition ? PanResponder.create({\n    onMoveShouldSetPanResponder: handleMoveShouldSetPanResponder,\n    onPanResponderMove: handlePanResponderMove,\n    onPanResponderRelease: handlePanResponderEnd,\n    onPanResponderTerminate: handlePanResponderEnd\n  }) : PanResponder.create({}), [numberOfDays, position, headerHeight]);\n  const bounceToPosition = (toValue = 0) => {\n    if (!disablePan) {\n      const threshold = isOpen ? openHeight.current - closeThreshold : closedHeight + openThreshold;\n      let _isOpen = _height.current >= threshold;\n      const newValue = _isOpen ? openHeight.current : closedHeight;\n      deltaY.setValue(_height.current);\n      _height.current = toValue || newValue;\n      _isOpen = _height.current >= threshold;\n      resetWeekCalendarOpacity(_isOpen);\n      Animated.spring(deltaY, {\n        toValue: _height.current,\n        speed: SPEED,\n        bounciness: BOUNCINESS,\n        useNativeDriver: false\n      }).start(() => {\n        onCalendarToggled?.(_isOpen);\n        setPosition(() => _height.current === closedHeight ? Positions.CLOSED : Positions.OPEN);\n      });\n      closeHeader(_isOpen);\n    }\n  };\n  const resetWeekCalendarOpacity = async isOpen => {\n    _weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n    updateNativeStyles();\n  };\n  const closeHeader = isOpen => {\n    headerDeltaY.current.setValue(Number(_headerStyles.style.top));\n    if (!horizontal && !isOpen) {\n      Animated.spring(headerDeltaY.current, {\n        toValue: 0,\n        speed: SPEED / 10,\n        bounciness: 1,\n        useNativeDriver: false\n      }).start();\n    }\n  };\n  const closeCalendar = useCallback(() => {\n    setTimeout(() => {\n      if (isOpen) {\n        bounceToPosition(closedHeight);\n      }\n    }, 0);\n  }, [isOpen, closedHeight]);\n  const toggleCalendarPosition = useCallback(() => {\n    bounceToPosition(isOpen ? closedHeight : openHeight.current);\n  }, [isOpen, bounceToPosition, closedHeight]);\n  const _onPressArrowLeft = useCallback((method, month) => {\n    onPressArrowLeft?.(method, month);\n    scrollPage(false);\n  }, [onPressArrowLeft, scrollPage]);\n  const _onPressArrowRight = useCallback((method, month) => {\n    onPressArrowRight?.(method, month);\n    scrollPage(true);\n  }, [onPressArrowRight, scrollPage]);\n  const _onDayPress = useCallback(value => {\n    if (numberOfDaysCondition) {\n      setDate?.(value.dateString, UpdateSources.DAY_PRESS);\n    }\n    if (closeOnDayPress) {\n      closeCalendar();\n    }\n    onDayPress?.(value);\n  }, [onDayPress, closeOnDayPress, closeCalendar, numberOfDaysCondition]);\n  const onVisibleMonthsChange = useCallback(throttle(value => {\n    const newDate = first(value);\n    if (newDate) {\n      const month = newDate.month;\n      if (month && visibleMonth.current !== month) {\n        visibleMonth.current = month;\n        const year = newDate.year;\n        if (year) {\n          visibleYear.current = year;\n        }\n        if (visibleMonth.current !== getMonth(date)) {\n          const next = isLaterDate(newDate, date);\n          scrollPage(next);\n        }\n        setTimeout(() => {\n          const _numberOfWeeks = getNumberOfWeeksInMonth(newDate.dateString);\n          if (_numberOfWeeks !== numberOfWeeks.current) {\n            numberOfWeeks.current = _numberOfWeeks;\n            openHeight.current = getOpenHeight();\n            if (isOpen) {\n              bounceToPosition(openHeight.current);\n            }\n          }\n        }, 0);\n      }\n    }\n  }, 100, {\n    trailing: true,\n    leading: false\n  }), [date, scrollPage]);\n  const _renderArrow = useCallback(direction => {\n    if (isFunction(renderArrow)) {\n      return renderArrow(direction);\n    }\n    return _jsxDEV(Image, {\n      source: direction === 'right' ? rightArrowImageSource : leftArrowImageSource,\n      style: style.current.arrowImage,\n      testID: `${testID}.${direction}Arrow`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 17\n    }, this);\n  }, [renderArrow, rightArrowImageSource, leftArrowImageSource, testID]);\n  const renderWeekDaysNames = () => {\n    return _jsxDEV(View, {\n      style: weekDaysStyle,\n      children: _jsxDEV(WeekDaysNames, {\n        firstDay: firstDay,\n        style: style.current.dayHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 17\n    }, this);\n  };\n  const renderAnimatedHeader = () => {\n    const monthYear = new XDate(date)?.toString('MMMM yyyy');\n    return _jsxDEV(Animated.View, {\n      ref: header,\n      style: animatedHeaderStyle,\n      pointerEvents: 'none',\n      children: [_jsxDEV(Text, {\n        allowFontScaling: false,\n        style: style.current.headerTitle,\n        children: monthYear\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), renderWeekDaysNames()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 17\n    }, this);\n  };\n  const renderKnob = () => {\n    return _jsxDEV(View, {\n      style: style.current.knobContainer,\n      pointerEvents: 'box-none',\n      children: _jsxDEV(TouchableOpacity, {\n        style: style.current.knob,\n        testID: `${testID}.knob`,\n        onPress: toggleCalendarPosition,\n        hitSlop: knobHitSlop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 17\n    }, this);\n  };\n  const renderWeekCalendar = () => {\n    const WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n    return _jsxDEV(Animated.View, {\n      ref: weekCalendarWrapper,\n      style: weekCalendarStyle,\n      pointerEvents: isOpen ? 'none' : 'auto',\n      children: _jsxDEV(WeekComponent, Object.assign({\n        testID: `${testID}.weekCalendar`,\n        firstDay: firstDay\n      }, others, {\n        allowShadow: disableWeekScroll ? undefined : false,\n        current: disableWeekScroll ? date : undefined,\n        theme: themeObject,\n        style: calendarStyle,\n        hideDayNames: true,\n        onDayPress: _onDayPress,\n        accessibilityElementsHidden: true,\n        importantForAccessibility: 'no-hide-descendants'\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 17\n    }, this);\n  };\n  const renderCalendarList = () => {\n    return _jsxDEV(CalendarList, Object.assign({\n      testID: `${testID}.calendarList`,\n      horizontal: horizontal,\n      firstDay: firstDay,\n      calendarStyle: calendarStyle,\n      onHeaderLayout: onHeaderLayout\n    }, others, {\n      current: date,\n      theme: themeObject,\n      ref: calendarList,\n      onDayPress: _onDayPress,\n      onVisibleMonthsChange: onVisibleMonthsChange,\n      pagingEnabled: true,\n      scrollEnabled: isOpen,\n      hideArrows: shouldHideArrows,\n      onPressArrowLeft: _onPressArrowLeft,\n      onPressArrowRight: _onPressArrowRight,\n      hideExtraDays: !horizontal && isOpen,\n      renderArrow: _renderArrow,\n      staticHeader: true,\n      numberOfDays: numberOfDays,\n      headerStyle: _headerStyle,\n      timelineLeftInset: timelineLeftInset,\n      context: useContext(Context)\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 17\n    }, this);\n  };\n  return _jsxDEV(View, {\n    testID: testID,\n    style: containerStyle,\n    children: screenReaderEnabled ? _jsxDEV(Calendar, Object.assign({\n      testID: `${testID}.calendarAccessible`\n    }, others, {\n      theme: themeObject,\n      onDayPress: _onDayPress,\n      hideExtraDays: true,\n      renderArrow: _renderArrow\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 31\n    }, this) : _jsxDEV(Animated.View, Object.assign({\n      testID: `${testID}.expandableContainer`,\n      ref: wrapper,\n      style: wrapperStyle\n    }, panResponder.panHandlers, {\n      children: [renderCalendarList(), renderWeekCalendar(), !hideKnob && renderKnob(), !horizontal && renderAnimatedHeader()]\n    }), void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 185\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 408,\n    columnNumber: 13\n  }, this);\n};\nexport default ExpandableCalendar;\nExpandableCalendar.displayName = 'ExpandableCalendar';\nExpandableCalendar.defaultProps = {\n  horizontal: true,\n  initialPosition: Positions.CLOSED,\n  firstDay: 0,\n  leftArrowImageSource: LEFT_ARROW,\n  rightArrowImageSource: RIGHT_ARROW,\n  allowShadow: true,\n  openThreshold: PAN_GESTURE_THRESHOLD,\n  closeThreshold: PAN_GESTURE_THRESHOLD,\n  closeOnDayPress: true\n};\nExpandableCalendar.positions = Positions;","map":{"version":3,"names":["first","isFunction","isNumber","throttle","XDate","React","useContext","useRef","useState","useEffect","useCallback","useMemo","AccessibilityInfo","PanResponder","Animated","View","Text","Image","TouchableOpacity","page","parseDate","toMarkingFormat","styleConstructor","KNOB_CONTAINER_HEIGHT","WeekDaysNames","Calendar","CalendarList","Week","WeekCalendar","Context","constants","UpdateSources","jsxDEV","_jsxDEV","Positions","SPEED","BOUNCINESS","WEEK_HEIGHT","DAY_NAMES_PADDING","PAN_GESTURE_THRESHOLD","LEFT_ARROW","require","RIGHT_ARROW","knobHitSlop","left","right","top","bottom","headerStyleOverride","stylesheet","calendar","header","week","marginTop","marginBottom","flexDirection","justifyContent","ExpandableCalendar","props","date","setDate","numberOfDays","timelineLeftInset","initialPosition","CLOSED","onCalendarToggled","disablePan","hideKnob","leftArrowImageSource","rightArrowImageSource","allowShadow","disableWeekScroll","openThreshold","closeThreshold","closeOnDayPress","horizontal","calendarStyle","theme","style","propsStyle","firstDay","onDayPress","hideArrows","onPressArrowLeft","onPressArrowRight","renderArrow","testID","others","_objectWithoutPropertiesLoose","_excluded","screenReaderEnabled","setScreenReaderEnabled","headerHeight","setHeaderHeight","onHeaderLayout","nativeEvent","layout","height","getYear","d","getFullYear","getMonth","visibleMonth","visibleYear","isLaterDate","date1","date2","year","month","scrollToDate","getNumberOfWeeksInMonth","days","length","numberOfWeeks","position","setPosition","isOpen","OPEN","getOpenHeight","Math","max","screenHeight","screenWidth","current","openHeight","closedHeight","Number","startHeight","_height","deltaY","Value","headerDeltaY","setValue","wrapper","calendarList","weekCalendarWrapper","themeObject","Object","assign","_wrapperStyles","_headerStyles","_weekCalendarStyles","opacity","shouldHideArrows","updateNativeStyles","setNativeProps","weekDaysStyle","leftPaddings","paddingLeft","rightPaddings","paddingRight","weekDayNames","animatedHeaderStyle","weekCalendarStyle","weekContainer","hidden","visible","containerStyle","containerShadow","wrapperStyle","numberOfDaysHeaderStyle","paddingHorizontal","_headerStyle","headerStyle","isScreenReaderEnabled","then","handleScreenReaderStatus","fetch","scrollToDay","scrollToMonth","scrollPage","next","addMonths","dayOfTheWeek","getDay","daysToAdd","addDays","firstDayOfWeek","PAGE_SCROLL","handleMoveShouldSetPanResponder","_","gestureState","dy","handlePanResponderMove","min","abs","handlePanResponderEnd","bounceToPosition","numberOfDaysCondition","panResponder","create","onMoveShouldSetPanResponder","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","toValue","threshold","_isOpen","newValue","resetWeekCalendarOpacity","spring","speed","bounciness","useNativeDriver","start","closeHeader","closeCalendar","setTimeout","toggleCalendarPosition","_onPressArrowLeft","method","_onPressArrowRight","_onDayPress","value","dateString","DAY_PRESS","onVisibleMonthsChange","newDate","_numberOfWeeks","trailing","leading","_renderArrow","direction","source","arrowImage","fileName","_jsxFileName","lineNumber","columnNumber","renderWeekDaysNames","children","dayHeader","renderAnimatedHeader","monthYear","toString","ref","pointerEvents","allowFontScaling","headerTitle","renderKnob","knobContainer","knob","onPress","hitSlop","renderWeekCalendar","WeekComponent","undefined","hideDayNames","accessibilityElementsHidden","importantForAccessibility","renderCalendarList","pagingEnabled","scrollEnabled","hideExtraDays","staticHeader","context","panHandlers","displayName","defaultProps","positions"],"sources":["/Users/recep/Gym/node_modules/react-native-calendars/src/expandableCalendar/index.js"],"sourcesContent":["import first from 'lodash/first';\nimport isFunction from 'lodash/isFunction';\nimport isNumber from 'lodash/isNumber';\nimport throttle from 'lodash/throttle';\nimport XDate from 'xdate';\nimport React, { useContext, useRef, useState, useEffect, useCallback, useMemo } from 'react';\nimport { AccessibilityInfo, PanResponder, Animated, View, Text, Image, TouchableOpacity } from 'react-native';\nimport { page } from '../dateutils';\nimport { parseDate, toMarkingFormat } from '../interface';\nimport styleConstructor, { KNOB_CONTAINER_HEIGHT } from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport Calendar from '../calendar';\nimport CalendarList from '../calendar-list';\nimport Week from './week';\nimport WeekCalendar from './WeekCalendar';\nimport Context from './Context';\nimport constants from '../commons/constants';\nimport { UpdateSources } from './commons';\nexport var Positions;\n(function (Positions) {\n    Positions[\"CLOSED\"] = \"closed\";\n    Positions[\"OPEN\"] = \"open\";\n})(Positions || (Positions = {}));\nconst SPEED = 20;\nconst BOUNCINESS = 6;\nconst WEEK_HEIGHT = 46;\nconst DAY_NAMES_PADDING = 24;\nconst PAN_GESTURE_THRESHOLD = 30;\nconst LEFT_ARROW = require('../calendar/img/previous.png');\nconst RIGHT_ARROW = require('../calendar/img/next.png');\nconst knobHitSlop = { left: 10, right: 10, top: 10, bottom: 10 };\nconst headerStyleOverride = {\n    stylesheet: {\n        calendar: {\n            header: {\n                week: {\n                    marginTop: 7,\n                    marginBottom: -4,\n                    flexDirection: 'row',\n                    justifyContent: 'space-around'\n                }\n            }\n        }\n    }\n};\n/**\n * @description: Expandable calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst ExpandableCalendar = (props) => {\n    const { date, setDate, numberOfDays, timelineLeftInset } = useContext(Context);\n    const { \n    /** ExpandableCalendar props */\n    initialPosition = Positions.CLOSED, onCalendarToggled, disablePan, hideKnob = numberOfDays && numberOfDays > 1, leftArrowImageSource = LEFT_ARROW, rightArrowImageSource = RIGHT_ARROW, allowShadow = true, disableWeekScroll, openThreshold = PAN_GESTURE_THRESHOLD, closeThreshold = PAN_GESTURE_THRESHOLD, closeOnDayPress = true, \n    /** CalendarList props */\n    horizontal = true, calendarStyle, theme, style: propsStyle, firstDay = 0, onDayPress, hideArrows, onPressArrowLeft, onPressArrowRight, renderArrow, testID, ...others } = props;\n    const [screenReaderEnabled, setScreenReaderEnabled] = useState(false);\n    const [headerHeight, setHeaderHeight] = useState(0);\n    const onHeaderLayout = useCallback(({ nativeEvent: { layout: { height } } }) => {\n        setHeaderHeight(height);\n    }, []);\n    /** Date */\n    const getYear = (date) => {\n        const d = new XDate(date);\n        return d.getFullYear();\n    };\n    const getMonth = (date) => {\n        const d = new XDate(date);\n        return d.getMonth() + 1; // getMonth() returns month's index' (0-11)\n    };\n    const visibleMonth = useRef(getMonth(date));\n    const visibleYear = useRef(getYear(date));\n    const isLaterDate = (date1, date2) => {\n        if (date1 && date2) {\n            if (date1.year > getYear(date2)) {\n                return true;\n            }\n            if (date1.year === getYear(date2)) {\n                if (date1.month > getMonth(date2)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    useEffect(() => {\n        // date was changed from AgendaList, arrows or scroll\n        scrollToDate(date);\n    }, [date]);\n    /** Number of weeks */\n    const getNumberOfWeeksInMonth = (month) => {\n        const days = page(new XDate(month), firstDay);\n        return days.length / 7;\n    };\n    const numberOfWeeks = useRef(getNumberOfWeeksInMonth(date));\n    /** Position */\n    const [position, setPosition] = useState(numberOfDays ? Positions.CLOSED : initialPosition);\n    const isOpen = position === Positions.OPEN;\n    const getOpenHeight = () => {\n        if (!horizontal) {\n            return Math.max(constants.screenHeight, constants.screenWidth);\n        }\n        return headerHeight + (WEEK_HEIGHT * (numberOfWeeks.current)) + (hideKnob ? 0 : KNOB_CONTAINER_HEIGHT);\n    };\n    const openHeight = useRef(getOpenHeight());\n    const closedHeight = useMemo(() => headerHeight + WEEK_HEIGHT + (hideKnob || Number(numberOfDays) > 1 ? 0 : KNOB_CONTAINER_HEIGHT), [numberOfDays, hideKnob, headerHeight]);\n    const startHeight = useMemo(() => isOpen ? openHeight.current : closedHeight, [closedHeight, isOpen]);\n    const _height = useRef(startHeight);\n    const deltaY = useMemo(() => new Animated.Value(startHeight), [startHeight]);\n    const headerDeltaY = useRef(new Animated.Value(isOpen ? -headerHeight : 0));\n    useEffect(() => {\n        _height.current = startHeight;\n        deltaY.setValue(startHeight);\n    }, [startHeight]);\n    useEffect(() => {\n        openHeight.current = getOpenHeight();\n    }, [headerHeight]);\n    useEffect(() => {\n        if (numberOfDays) {\n            setPosition(Positions.CLOSED);\n        }\n    }, [numberOfDays]);\n    /** Components' refs */\n    const wrapper = useRef();\n    const calendarList = useRef();\n    const header = useRef();\n    const weekCalendarWrapper = useRef();\n    /** Styles */\n    const style = useRef(styleConstructor(theme));\n    const themeObject = Object.assign(headerStyleOverride, theme);\n    const _wrapperStyles = useRef({ style: { height: startHeight } });\n    const _headerStyles = { style: { top: isOpen ? -headerHeight : 0 } };\n    const _weekCalendarStyles = { style: { opacity: isOpen ? 0 : 1 } };\n    const shouldHideArrows = !horizontal ? true : hideArrows || false;\n    const updateNativeStyles = () => {\n        wrapper?.current?.setNativeProps(_wrapperStyles.current);\n        if (!horizontal) {\n            header?.current?.setNativeProps(_headerStyles);\n        }\n        else {\n            weekCalendarWrapper?.current?.setNativeProps(_weekCalendarStyles);\n        }\n    };\n    const weekDaysStyle = useMemo(() => {\n        const leftPaddings = calendarStyle?.paddingLeft;\n        const rightPaddings = calendarStyle?.paddingRight;\n        return [\n            style.current.weekDayNames,\n            {\n                paddingLeft: isNumber(leftPaddings) ? leftPaddings + 6 : DAY_NAMES_PADDING,\n                paddingRight: isNumber(rightPaddings) ? rightPaddings + 6 : DAY_NAMES_PADDING\n            }\n        ];\n    }, [calendarStyle]);\n    const animatedHeaderStyle = useMemo(() => {\n        return [style.current.header, { height: headerHeight, top: headerDeltaY.current }];\n    }, [headerDeltaY.current, headerHeight]);\n    const weekCalendarStyle = useMemo(() => {\n        return [style.current.weekContainer, isOpen ? style.current.hidden : style.current.visible, { top: headerHeight }];\n    }, [isOpen, headerHeight]);\n    const containerStyle = useMemo(() => {\n        return [allowShadow && style.current.containerShadow, propsStyle, headerHeight === 0 && style.current.hidden];\n    }, [allowShadow, propsStyle, headerHeight]);\n    const wrapperStyle = useMemo(() => {\n        return { height: deltaY };\n    }, [deltaY]);\n    const numberOfDaysHeaderStyle = useMemo(() => {\n        if (numberOfDays && numberOfDays > 1) {\n            return { paddingHorizontal: 0 };\n        }\n    }, [numberOfDays]);\n    const _headerStyle = useMemo(() => {\n        return [numberOfDaysHeaderStyle, props.headerStyle];\n    }, [props.headerStyle, numberOfDaysHeaderStyle]);\n    /** AccessibilityInfo */\n    useEffect(() => {\n        if (AccessibilityInfo) {\n            if (AccessibilityInfo.isScreenReaderEnabled) {\n                AccessibilityInfo.isScreenReaderEnabled().then(handleScreenReaderStatus);\n                //@ts-expect-error\n            }\n            else if (AccessibilityInfo.fetch) {\n                // Support for older RN versions\n                //@ts-expect-error\n                AccessibilityInfo.fetch().then(handleScreenReaderStatus);\n            }\n        }\n    }, []);\n    const handleScreenReaderStatus = (screenReaderEnabled) => {\n        setScreenReaderEnabled(screenReaderEnabled);\n    };\n    /** Scroll */\n    const scrollToDate = (date) => {\n        if (!horizontal) {\n            calendarList?.current?.scrollToDay(date, 0, true);\n        }\n        else if (getYear(date) !== visibleYear.current || getMonth(date) !== visibleMonth.current) {\n            // don't scroll if the month is already visible\n            calendarList?.current?.scrollToMonth(date);\n        }\n    };\n    const scrollPage = useCallback((next) => {\n        if (horizontal) {\n            const d = parseDate(date);\n            if (isOpen) {\n                d.setDate(1);\n                d.addMonths(next ? 1 : -1);\n            }\n            else {\n                let dayOfTheWeek = d.getDay();\n                if (dayOfTheWeek < firstDay && firstDay > 0) {\n                    dayOfTheWeek = 7 + dayOfTheWeek;\n                }\n                if (numberOfDays) {\n                    const daysToAdd = numberOfDays <= 1 ? 7 : numberOfDays;\n                    d.addDays(next ? daysToAdd : -daysToAdd);\n                }\n                else {\n                    const firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n                    d.addDays(firstDayOfWeek);\n                }\n            }\n            setDate?.(toMarkingFormat(d), UpdateSources.PAGE_SCROLL);\n        }\n    }, [horizontal, isOpen, firstDay, numberOfDays, setDate, date]);\n    /** Pan Gesture */\n    const handleMoveShouldSetPanResponder = (_, gestureState) => {\n        if (disablePan) {\n            return false;\n        }\n        if (!horizontal && isOpen) {\n            // disable pan detection when vertical calendar is open to allow calendar scroll\n            return false;\n        }\n        if (!isOpen && gestureState.dy < 0) {\n            // disable pan detection to limit to closed height\n            return false;\n        }\n        return gestureState.dy > 5 || gestureState.dy < -5;\n    };\n    const handlePanResponderMove = (_, gestureState) => {\n        // limit min height to closed height and max to open height\n        _wrapperStyles.current.style.height = Math.min(Math.max(closedHeight, _height.current + gestureState.dy), openHeight.current);\n        if (!horizontal) {\n            // vertical CalenderList header\n            _headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -headerHeight), 0);\n        }\n        else {\n            // horizontal Week view\n            if (!isOpen) {\n                _weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n            }\n            else if (gestureState.dy < 0) {\n                _weekCalendarStyles.style.opacity = Math.max(0, Math.min(Math.abs(gestureState.dy / 200), 1));\n            }\n        }\n        updateNativeStyles();\n    };\n    const handlePanResponderEnd = () => {\n        _height.current = Number(_wrapperStyles.current.style.height);\n        bounceToPosition();\n    };\n    const numberOfDaysCondition = useMemo(() => {\n        return !numberOfDays || numberOfDays && numberOfDays <= 1;\n    }, [numberOfDays]);\n    const panResponder = useMemo(() => numberOfDaysCondition ? PanResponder.create({\n        onMoveShouldSetPanResponder: handleMoveShouldSetPanResponder,\n        onPanResponderMove: handlePanResponderMove,\n        onPanResponderRelease: handlePanResponderEnd,\n        onPanResponderTerminate: handlePanResponderEnd\n    }) : PanResponder.create({}), [numberOfDays, position, headerHeight]); // All the functions here rely on headerHeight directly or indirectly through refs that are updated in useEffect\n    /** Animated */\n    const bounceToPosition = (toValue = 0) => {\n        if (!disablePan) {\n            const threshold = isOpen ? openHeight.current - closeThreshold : closedHeight + openThreshold;\n            let _isOpen = _height.current >= threshold;\n            const newValue = _isOpen ? openHeight.current : closedHeight;\n            deltaY.setValue(_height.current); // set the start position for the animated value\n            _height.current = toValue || newValue;\n            _isOpen = _height.current >= threshold; // re-check after _height.current was set\n            resetWeekCalendarOpacity(_isOpen);\n            Animated.spring(deltaY, {\n                toValue: _height.current,\n                speed: SPEED,\n                bounciness: BOUNCINESS,\n                useNativeDriver: false\n            }).start(() => {\n                onCalendarToggled?.(_isOpen);\n                setPosition(() => _height.current === closedHeight ? Positions.CLOSED : Positions.OPEN);\n            });\n            closeHeader(_isOpen);\n        }\n    };\n    const resetWeekCalendarOpacity = async (isOpen) => {\n        _weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n        updateNativeStyles();\n    };\n    const closeHeader = (isOpen) => {\n        headerDeltaY.current.setValue(Number(_headerStyles.style.top)); // set the start position for the animated value\n        if (!horizontal && !isOpen) {\n            Animated.spring(headerDeltaY.current, {\n                toValue: 0,\n                speed: SPEED / 10,\n                bounciness: 1,\n                useNativeDriver: false\n            }).start();\n        }\n    };\n    const closeCalendar = useCallback(() => {\n        setTimeout(() => {\n            // to allows setDate to be completed\n            if (isOpen) {\n                bounceToPosition(closedHeight);\n            }\n        }, 0);\n    }, [isOpen, closedHeight]);\n    const toggleCalendarPosition = useCallback(() => {\n        bounceToPosition(isOpen ? closedHeight : openHeight.current);\n    }, [isOpen, bounceToPosition, closedHeight]);\n    /** Events */\n    const _onPressArrowLeft = useCallback((method, month) => {\n        onPressArrowLeft?.(method, month);\n        scrollPage(false);\n    }, [onPressArrowLeft, scrollPage]);\n    const _onPressArrowRight = useCallback((method, month) => {\n        onPressArrowRight?.(method, month);\n        scrollPage(true);\n    }, [onPressArrowRight, scrollPage]);\n    const _onDayPress = useCallback((value) => {\n        if (numberOfDaysCondition) {\n            setDate?.(value.dateString, UpdateSources.DAY_PRESS);\n        }\n        if (closeOnDayPress) {\n            closeCalendar();\n        }\n        onDayPress?.(value);\n    }, [onDayPress, closeOnDayPress, closeCalendar, numberOfDaysCondition]);\n    const onVisibleMonthsChange = useCallback(throttle((value) => {\n        const newDate = first(value);\n        if (newDate) {\n            const month = newDate.month;\n            if (month && visibleMonth.current !== month) {\n                visibleMonth.current = month;\n                const year = newDate.year;\n                if (year) {\n                    visibleYear.current = year;\n                }\n                // for horizontal scroll\n                if (visibleMonth.current !== getMonth(date)) {\n                    const next = isLaterDate(newDate, date);\n                    scrollPage(next);\n                }\n                // updating openHeight\n                setTimeout(() => {\n                    // to wait for setDate() call in horizontal scroll (scrollPage())\n                    const _numberOfWeeks = getNumberOfWeeksInMonth(newDate.dateString);\n                    if (_numberOfWeeks !== numberOfWeeks.current) {\n                        numberOfWeeks.current = _numberOfWeeks;\n                        openHeight.current = getOpenHeight();\n                        if (isOpen) {\n                            bounceToPosition(openHeight.current);\n                        }\n                    }\n                }, 0);\n            }\n        }\n    }, 100, { trailing: true, leading: false }), [date, scrollPage]);\n    /** Renders */\n    const _renderArrow = useCallback((direction) => {\n        if (isFunction(renderArrow)) {\n            return renderArrow(direction);\n        }\n        return (<Image source={direction === 'right' ? rightArrowImageSource : leftArrowImageSource} style={style.current.arrowImage} testID={`${testID}.${direction}Arrow`}/>);\n    }, [renderArrow, rightArrowImageSource, leftArrowImageSource, testID]);\n    const renderWeekDaysNames = () => {\n        return (<View style={weekDaysStyle}>\n        <WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>\n      </View>);\n    };\n    const renderAnimatedHeader = () => {\n        const monthYear = new XDate(date)?.toString('MMMM yyyy');\n        return (<Animated.View ref={header} style={animatedHeaderStyle} pointerEvents={'none'}>\n        <Text allowFontScaling={false} style={style.current.headerTitle}>\n          {monthYear}\n        </Text>\n        {renderWeekDaysNames()}\n      </Animated.View>);\n    };\n    const renderKnob = () => {\n        return (<View style={style.current.knobContainer} pointerEvents={'box-none'}>\n        <TouchableOpacity style={style.current.knob} testID={`${testID}.knob`} onPress={toggleCalendarPosition} hitSlop={knobHitSlop} /* activeOpacity={isOpen ? undefined : 1} *//>\n      </View>);\n    };\n    const renderWeekCalendar = () => {\n        const WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n        return (<Animated.View ref={weekCalendarWrapper} style={weekCalendarStyle} pointerEvents={isOpen ? 'none' : 'auto'}>\n        <WeekComponent testID={`${testID}.weekCalendar`} firstDay={firstDay} {...others} allowShadow={disableWeekScroll ? undefined : false} current={disableWeekScroll ? date : undefined} theme={themeObject} style={calendarStyle} hideDayNames={true} onDayPress={_onDayPress} accessibilityElementsHidden // iOS\n         importantForAccessibility={'no-hide-descendants'} // Android\n        />\n      </Animated.View>);\n    };\n    const renderCalendarList = () => {\n        return (<CalendarList testID={`${testID}.calendarList`} horizontal={horizontal} firstDay={firstDay} calendarStyle={calendarStyle} onHeaderLayout={onHeaderLayout} {...others} current={date} theme={themeObject} ref={calendarList} onDayPress={_onDayPress} onVisibleMonthsChange={onVisibleMonthsChange} pagingEnabled scrollEnabled={isOpen} hideArrows={shouldHideArrows} onPressArrowLeft={_onPressArrowLeft} onPressArrowRight={_onPressArrowRight} hideExtraDays={!horizontal && isOpen} renderArrow={_renderArrow} staticHeader numberOfDays={numberOfDays} headerStyle={_headerStyle} timelineLeftInset={timelineLeftInset} context={useContext(Context)}/>);\n    };\n    return (<View testID={testID} style={containerStyle}>\n      {screenReaderEnabled ? (<Calendar testID={`${testID}.calendarAccessible`} {...others} theme={themeObject} onDayPress={_onDayPress} hideExtraDays renderArrow={_renderArrow}/>) : (<Animated.View testID={`${testID}.expandableContainer`} ref={wrapper} style={wrapperStyle} {...panResponder.panHandlers}>\n          {renderCalendarList()}\n          {renderWeekCalendar()}\n          {!hideKnob && renderKnob()}\n          {!horizontal && renderAnimatedHeader()}\n        </Animated.View>)}\n    </View>);\n};\nexport default ExpandableCalendar;\nExpandableCalendar.displayName = 'ExpandableCalendar';\nExpandableCalendar.defaultProps = {\n    horizontal: true,\n    initialPosition: Positions.CLOSED,\n    firstDay: 0,\n    leftArrowImageSource: LEFT_ARROW,\n    rightArrowImageSource: RIGHT_ARROW,\n    allowShadow: true,\n    openThreshold: PAN_GESTURE_THRESHOLD,\n    closeThreshold: PAN_GESTURE_THRESHOLD,\n    closeOnDayPress: true\n};\nExpandableCalendar.positions = Positions;\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,cAAc;AAChC,OAAOC,UAAU,MAAM,mBAAmB;AAC1C,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,UAAU,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AAAC,OAAAC,iBAAA;AAAA,OAAAC,YAAA;AAAA,OAAAC,QAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,KAAA;AAAA,OAAAC,gBAAA;AAE7F,SAASC,IAAI,QAAQ,cAAc;AACnC,SAASC,SAAS,EAAEC,eAAe,QAAQ,cAAc;AACzD,OAAOC,gBAAgB,IAAIC,qBAAqB,QAAQ,SAAS;AACjE,OAAOC,aAAa,MAAM,0BAA0B;AACpD,OAAOC,QAAQ,MAAM,aAAa;AAClC,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,SAAS,MAAM,sBAAsB;AAC5C,SAASC,aAAa,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAC1C,OAAO,IAAIC,SAAS;AACpB,CAAC,UAAUA,SAAS,EAAE;EAClBA,SAAS,CAAC,QAAQ,CAAC,GAAG,QAAQ;EAC9BA,SAAS,CAAC,MAAM,CAAC,GAAG,MAAM;AAC9B,CAAC,EAAEA,SAAS,KAAKA,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;AACjC,MAAMC,KAAK,GAAG,EAAE;AAChB,MAAMC,UAAU,GAAG,CAAC;AACpB,MAAMC,WAAW,GAAG,EAAE;AACtB,MAAMC,iBAAiB,GAAG,EAAE;AAC5B,MAAMC,qBAAqB,GAAG,EAAE;AAChC,MAAMC,UAAU,GAAGC,OAAO,CAAC,8BAA8B,CAAC;AAC1D,MAAMC,WAAW,GAAGD,OAAO,CAAC,0BAA0B,CAAC;AACvD,MAAME,WAAW,GAAG;EAAEC,IAAI,EAAE,EAAE;EAAEC,KAAK,EAAE,EAAE;EAAEC,GAAG,EAAE,EAAE;EAAEC,MAAM,EAAE;AAAG,CAAC;AAChE,MAAMC,mBAAmB,GAAG;EACxBC,UAAU,EAAE;IACRC,QAAQ,EAAE;MACNC,MAAM,EAAE;QACJC,IAAI,EAAE;UACFC,SAAS,EAAE,CAAC;UACZC,YAAY,EAAE,CAAC,CAAC;UAChBC,aAAa,EAAE,KAAK;UACpBC,cAAc,EAAE;QACpB;MACJ;IACJ;EACJ;AACJ,CAAC;AAQD,MAAMC,kBAAkB,GAAIC,KAAK,IAAK;EAClC,MAAM;IAAEC,IAAI;IAAEC,OAAO;IAAEC,YAAY;IAAEC;EAAkB,CAAC,GAAGxD,UAAU,CAACuB,OAAO,CAAC;EAC9E,MAAM;MAENkC,eAAe,GAAG7B,SAAS,CAAC8B,MAAM;MAAEC,iBAAiB;MAAEC,UAAU;MAAEC,QAAQ,GAAGN,YAAY,IAAIA,YAAY,GAAG,CAAC;MAAEO,oBAAoB,GAAG5B,UAAU;MAAE6B,qBAAqB,GAAG3B,WAAW;MAAE4B,WAAW,GAAG,IAAI;MAAEC,iBAAiB;MAAEC,aAAa,GAAGjC,qBAAqB;MAAEkC,cAAc,GAAGlC,qBAAqB;MAAEmC,eAAe,GAAG,IAAI;MAEpUC,UAAU,GAAG,IAAI;MAAEC,aAAa;MAAEC,KAAK;MAAEC,KAAK,EAAEC,UAAU;MAAEC,QAAQ,GAAG,CAAC;MAAEC,UAAU;MAAEC,UAAU;MAAEC,gBAAgB;MAAEC,iBAAiB;MAAEC,WAAW;MAAEC;IAAkB,CAAC,GAAG5B,KAAK;IAAhB6B,MAAM,GAAAC,6BAAA,CAAK9B,KAAK,EAAA+B,SAAA;EAC/K,MAAM,CAACC,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGnF,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM,CAACoF,YAAY,EAAEC,eAAe,CAAC,GAAGrF,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAMsF,cAAc,GAAGpF,WAAW,CAAC,CAAC;IAAEqF,WAAW,EAAE;MAAEC,MAAM,EAAE;QAAEC;MAAO;IAAE;EAAE,CAAC,KAAK;IAC5EJ,eAAe,CAACI,MAAM,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,OAAO,GAAIvC,IAAI,IAAK;IACtB,MAAMwC,CAAC,GAAG,IAAI/F,KAAK,CAACuD,IAAI,CAAC;IACzB,OAAOwC,CAAC,CAACC,WAAW,CAAC,CAAC;EAC1B,CAAC;EACD,MAAMC,QAAQ,GAAI1C,IAAI,IAAK;IACvB,MAAMwC,CAAC,GAAG,IAAI/F,KAAK,CAACuD,IAAI,CAAC;IACzB,OAAOwC,CAAC,CAACE,QAAQ,CAAC,CAAC,GAAG,CAAC;EAC3B,CAAC;EACD,MAAMC,YAAY,GAAG/F,MAAM,CAAC8F,QAAQ,CAAC1C,IAAI,CAAC,CAAC;EAC3C,MAAM4C,WAAW,GAAGhG,MAAM,CAAC2F,OAAO,CAACvC,IAAI,CAAC,CAAC;EACzC,MAAM6C,WAAW,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IAClC,IAAID,KAAK,IAAIC,KAAK,EAAE;MAChB,IAAID,KAAK,CAACE,IAAI,GAAGT,OAAO,CAACQ,KAAK,CAAC,EAAE;QAC7B,OAAO,IAAI;MACf;MACA,IAAID,KAAK,CAACE,IAAI,KAAKT,OAAO,CAACQ,KAAK,CAAC,EAAE;QAC/B,IAAID,KAAK,CAACG,KAAK,GAAGP,QAAQ,CAACK,KAAK,CAAC,EAAE;UAC/B,OAAO,IAAI;QACf;MACJ;IACJ;IACA,OAAO,KAAK;EAChB,CAAC;EACDjG,SAAS,CAAC,MAAM;IAEZoG,YAAY,CAAClD,IAAI,CAAC;EACtB,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,MAAMmD,uBAAuB,GAAIF,KAAK,IAAK;IACvC,MAAMG,IAAI,GAAG5F,IAAI,CAAC,IAAIf,KAAK,CAACwG,KAAK,CAAC,EAAE5B,QAAQ,CAAC;IAC7C,OAAO+B,IAAI,CAACC,MAAM,GAAG,CAAC;EAC1B,CAAC;EACD,MAAMC,aAAa,GAAG1G,MAAM,CAACuG,uBAAuB,CAACnD,IAAI,CAAC,CAAC;EAE3D,MAAM,CAACuD,QAAQ,EAAEC,WAAW,CAAC,GAAG3G,QAAQ,CAACqD,YAAY,GAAG3B,SAAS,CAAC8B,MAAM,GAAGD,eAAe,CAAC;EAC3F,MAAMqD,MAAM,GAAGF,QAAQ,KAAKhF,SAAS,CAACmF,IAAI;EAC1C,MAAMC,aAAa,GAAGA,CAAA,KAAM;IACxB,IAAI,CAAC3C,UAAU,EAAE;MACb,OAAO4C,IAAI,CAACC,GAAG,CAAC1F,SAAS,CAAC2F,YAAY,EAAE3F,SAAS,CAAC4F,WAAW,CAAC;IAClE;IACA,OAAO9B,YAAY,GAAIvD,WAAW,GAAI4E,aAAa,CAACU,OAAS,IAAIxD,QAAQ,GAAG,CAAC,GAAG5C,qBAAqB,CAAC;EAC1G,CAAC;EACD,MAAMqG,UAAU,GAAGrH,MAAM,CAAC+G,aAAa,CAAC,CAAC,CAAC;EAC1C,MAAMO,YAAY,GAAGlH,OAAO,CAAC,MAAMiF,YAAY,GAAGvD,WAAW,IAAI8B,QAAQ,IAAI2D,MAAM,CAACjE,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,GAAGtC,qBAAqB,CAAC,EAAE,CAACsC,YAAY,EAAEM,QAAQ,EAAEyB,YAAY,CAAC,CAAC;EAC3K,MAAMmC,WAAW,GAAGpH,OAAO,CAAC,MAAMyG,MAAM,GAAGQ,UAAU,CAACD,OAAO,GAAGE,YAAY,EAAE,CAACA,YAAY,EAAET,MAAM,CAAC,CAAC;EACrG,MAAMY,OAAO,GAAGzH,MAAM,CAACwH,WAAW,CAAC;EACnC,MAAME,MAAM,GAAGtH,OAAO,CAAC,MAAM,IAAIG,QAAQ,CAACoH,KAAK,CAACH,WAAW,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAC5E,MAAMI,YAAY,GAAG5H,MAAM,CAAC,IAAIO,QAAQ,CAACoH,KAAK,CAACd,MAAM,GAAG,CAACxB,YAAY,GAAG,CAAC,CAAC,CAAC;EAC3EnF,SAAS,CAAC,MAAM;IACZuH,OAAO,CAACL,OAAO,GAAGI,WAAW;IAC7BE,MAAM,CAACG,QAAQ,CAACL,WAAW,CAAC;EAChC,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EACjBtH,SAAS,CAAC,MAAM;IACZmH,UAAU,CAACD,OAAO,GAAGL,aAAa,CAAC,CAAC;EACxC,CAAC,EAAE,CAAC1B,YAAY,CAAC,CAAC;EAClBnF,SAAS,CAAC,MAAM;IACZ,IAAIoD,YAAY,EAAE;MACdsD,WAAW,CAACjF,SAAS,CAAC8B,MAAM,CAAC;IACjC;EACJ,CAAC,EAAE,CAACH,YAAY,CAAC,CAAC;EAElB,MAAMwE,OAAO,GAAG9H,MAAM,CAAC,CAAC;EACxB,MAAM+H,YAAY,GAAG/H,MAAM,CAAC,CAAC;EAC7B,MAAM4C,MAAM,GAAG5C,MAAM,CAAC,CAAC;EACvB,MAAMgI,mBAAmB,GAAGhI,MAAM,CAAC,CAAC;EAEpC,MAAMuE,KAAK,GAAGvE,MAAM,CAACe,gBAAgB,CAACuD,KAAK,CAAC,CAAC;EAC7C,MAAM2D,WAAW,GAAGC,MAAM,CAACC,MAAM,CAAC1F,mBAAmB,EAAE6B,KAAK,CAAC;EAC7D,MAAM8D,cAAc,GAAGpI,MAAM,CAAC;IAAEuE,KAAK,EAAE;MAAEmB,MAAM,EAAE8B;IAAY;EAAE,CAAC,CAAC;EACjE,MAAMa,aAAa,GAAG;IAAE9D,KAAK,EAAE;MAAEhC,GAAG,EAAEsE,MAAM,GAAG,CAACxB,YAAY,GAAG;IAAE;EAAE,CAAC;EACpE,MAAMiD,mBAAmB,GAAG;IAAE/D,KAAK,EAAE;MAAEgE,OAAO,EAAE1B,MAAM,GAAG,CAAC,GAAG;IAAE;EAAE,CAAC;EAClE,MAAM2B,gBAAgB,GAAG,CAACpE,UAAU,GAAG,IAAI,GAAGO,UAAU,IAAI,KAAK;EACjE,MAAM8D,kBAAkB,GAAGA,CAAA,KAAM;IAC7BX,OAAO,EAAEV,OAAO,EAAEsB,cAAc,CAACN,cAAc,CAAChB,OAAO,CAAC;IACxD,IAAI,CAAChD,UAAU,EAAE;MACbxB,MAAM,EAAEwE,OAAO,EAAEsB,cAAc,CAACL,aAAa,CAAC;IAClD,CAAC,MACI;MACDL,mBAAmB,EAAEZ,OAAO,EAAEsB,cAAc,CAACJ,mBAAmB,CAAC;IACrE;EACJ,CAAC;EACD,MAAMK,aAAa,GAAGvI,OAAO,CAAC,MAAM;IAChC,MAAMwI,YAAY,GAAGvE,aAAa,EAAEwE,WAAW;IAC/C,MAAMC,aAAa,GAAGzE,aAAa,EAAE0E,YAAY;IACjD,OAAO,CACHxE,KAAK,CAAC6C,OAAO,CAAC4B,YAAY,EAC1B;MACIH,WAAW,EAAElJ,QAAQ,CAACiJ,YAAY,CAAC,GAAGA,YAAY,GAAG,CAAC,GAAG7G,iBAAiB;MAC1EgH,YAAY,EAAEpJ,QAAQ,CAACmJ,aAAa,CAAC,GAAGA,aAAa,GAAG,CAAC,GAAG/G;IAChE,CAAC,CACJ;EACL,CAAC,EAAE,CAACsC,aAAa,CAAC,CAAC;EACnB,MAAM4E,mBAAmB,GAAG7I,OAAO,CAAC,MAAM;IACtC,OAAO,CAACmE,KAAK,CAAC6C,OAAO,CAACxE,MAAM,EAAE;MAAE8C,MAAM,EAAEL,YAAY;MAAE9C,GAAG,EAAEqF,YAAY,CAACR;IAAQ,CAAC,CAAC;EACtF,CAAC,EAAE,CAACQ,YAAY,CAACR,OAAO,EAAE/B,YAAY,CAAC,CAAC;EACxC,MAAM6D,iBAAiB,GAAG9I,OAAO,CAAC,MAAM;IACpC,OAAO,CAACmE,KAAK,CAAC6C,OAAO,CAAC+B,aAAa,EAAEtC,MAAM,GAAGtC,KAAK,CAAC6C,OAAO,CAACgC,MAAM,GAAG7E,KAAK,CAAC6C,OAAO,CAACiC,OAAO,EAAE;MAAE9G,GAAG,EAAE8C;IAAa,CAAC,CAAC;EACtH,CAAC,EAAE,CAACwB,MAAM,EAAExB,YAAY,CAAC,CAAC;EAC1B,MAAMiE,cAAc,GAAGlJ,OAAO,CAAC,MAAM;IACjC,OAAO,CAAC2D,WAAW,IAAIQ,KAAK,CAAC6C,OAAO,CAACmC,eAAe,EAAE/E,UAAU,EAAEa,YAAY,KAAK,CAAC,IAAId,KAAK,CAAC6C,OAAO,CAACgC,MAAM,CAAC;EACjH,CAAC,EAAE,CAACrF,WAAW,EAAES,UAAU,EAAEa,YAAY,CAAC,CAAC;EAC3C,MAAMmE,YAAY,GAAGpJ,OAAO,CAAC,MAAM;IAC/B,OAAO;MAAEsF,MAAM,EAAEgC;IAAO,CAAC;EAC7B,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EACZ,MAAM+B,uBAAuB,GAAGrJ,OAAO,CAAC,MAAM;IAC1C,IAAIkD,YAAY,IAAIA,YAAY,GAAG,CAAC,EAAE;MAClC,OAAO;QAAEoG,iBAAiB,EAAE;MAAE,CAAC;IACnC;EACJ,CAAC,EAAE,CAACpG,YAAY,CAAC,CAAC;EAClB,MAAMqG,YAAY,GAAGvJ,OAAO,CAAC,MAAM;IAC/B,OAAO,CAACqJ,uBAAuB,EAAEtG,KAAK,CAACyG,WAAW,CAAC;EACvD,CAAC,EAAE,CAACzG,KAAK,CAACyG,WAAW,EAAEH,uBAAuB,CAAC,CAAC;EAEhDvJ,SAAS,CAAC,MAAM;IACZ,IAAIG,iBAAiB,EAAE;MACnB,IAAIA,iBAAiB,CAACwJ,qBAAqB,EAAE;QACzCxJ,iBAAiB,CAACwJ,qBAAqB,CAAC,CAAC,CAACC,IAAI,CAACC,wBAAwB,CAAC;MAE5E,CAAC,MACI,IAAI1J,iBAAiB,CAAC2J,KAAK,EAAE;QAG9B3J,iBAAiB,CAAC2J,KAAK,CAAC,CAAC,CAACF,IAAI,CAACC,wBAAwB,CAAC;MAC5D;IACJ;EACJ,CAAC,EAAE,EAAE,CAAC;EACN,MAAMA,wBAAwB,GAAI5E,mBAAmB,IAAK;IACtDC,sBAAsB,CAACD,mBAAmB,CAAC;EAC/C,CAAC;EAED,MAAMmB,YAAY,GAAIlD,IAAI,IAAK;IAC3B,IAAI,CAACgB,UAAU,EAAE;MACb2D,YAAY,EAAEX,OAAO,EAAE6C,WAAW,CAAC7G,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC;IACrD,CAAC,MACI,IAAIuC,OAAO,CAACvC,IAAI,CAAC,KAAK4C,WAAW,CAACoB,OAAO,IAAItB,QAAQ,CAAC1C,IAAI,CAAC,KAAK2C,YAAY,CAACqB,OAAO,EAAE;MAEvFW,YAAY,EAAEX,OAAO,EAAE8C,aAAa,CAAC9G,IAAI,CAAC;IAC9C;EACJ,CAAC;EACD,MAAM+G,UAAU,GAAGhK,WAAW,CAAEiK,IAAI,IAAK;IACrC,IAAIhG,UAAU,EAAE;MACZ,MAAMwB,CAAC,GAAG/E,SAAS,CAACuC,IAAI,CAAC;MACzB,IAAIyD,MAAM,EAAE;QACRjB,CAAC,CAACvC,OAAO,CAAC,CAAC,CAAC;QACZuC,CAAC,CAACyE,SAAS,CAACD,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;MAC9B,CAAC,MACI;QACD,IAAIE,YAAY,GAAG1E,CAAC,CAAC2E,MAAM,CAAC,CAAC;QAC7B,IAAID,YAAY,GAAG7F,QAAQ,IAAIA,QAAQ,GAAG,CAAC,EAAE;UACzC6F,YAAY,GAAG,CAAC,GAAGA,YAAY;QACnC;QACA,IAAIhH,YAAY,EAAE;UACd,MAAMkH,SAAS,GAAGlH,YAAY,IAAI,CAAC,GAAG,CAAC,GAAGA,YAAY;UACtDsC,CAAC,CAAC6E,OAAO,CAACL,IAAI,GAAGI,SAAS,GAAG,CAACA,SAAS,CAAC;QAC5C,CAAC,MACI;UACD,MAAME,cAAc,GAAG,CAACN,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,IAAIE,YAAY,GAAG7F,QAAQ;UAChEmB,CAAC,CAAC6E,OAAO,CAACC,cAAc,CAAC;QAC7B;MACJ;MACArH,OAAO,GAAGvC,eAAe,CAAC8E,CAAC,CAAC,EAAEpE,aAAa,CAACmJ,WAAW,CAAC;IAC5D;EACJ,CAAC,EAAE,CAACvG,UAAU,EAAEyC,MAAM,EAAEpC,QAAQ,EAAEnB,YAAY,EAAED,OAAO,EAAED,IAAI,CAAC,CAAC;EAE/D,MAAMwH,+BAA+B,GAAGA,CAACC,CAAC,EAAEC,YAAY,KAAK;IACzD,IAAInH,UAAU,EAAE;MACZ,OAAO,KAAK;IAChB;IACA,IAAI,CAACS,UAAU,IAAIyC,MAAM,EAAE;MAEvB,OAAO,KAAK;IAChB;IACA,IAAI,CAACA,MAAM,IAAIiE,YAAY,CAACC,EAAE,GAAG,CAAC,EAAE;MAEhC,OAAO,KAAK;IAChB;IACA,OAAOD,YAAY,CAACC,EAAE,GAAG,CAAC,IAAID,YAAY,CAACC,EAAE,GAAG,CAAC,CAAC;EACtD,CAAC;EACD,MAAMC,sBAAsB,GAAGA,CAACH,CAAC,EAAEC,YAAY,KAAK;IAEhD1C,cAAc,CAAChB,OAAO,CAAC7C,KAAK,CAACmB,MAAM,GAAGsB,IAAI,CAACiE,GAAG,CAACjE,IAAI,CAACC,GAAG,CAACK,YAAY,EAAEG,OAAO,CAACL,OAAO,GAAG0D,YAAY,CAACC,EAAE,CAAC,EAAE1D,UAAU,CAACD,OAAO,CAAC;IAC7H,IAAI,CAAChD,UAAU,EAAE;MAEbiE,aAAa,CAAC9D,KAAK,CAAChC,GAAG,GAAGyE,IAAI,CAACiE,GAAG,CAACjE,IAAI,CAACC,GAAG,CAAC,CAAC6D,YAAY,CAACC,EAAE,EAAE,CAAC1F,YAAY,CAAC,EAAE,CAAC,CAAC;IACpF,CAAC,MACI;MAED,IAAI,CAACwB,MAAM,EAAE;QACTyB,mBAAmB,CAAC/D,KAAK,CAACgE,OAAO,GAAGvB,IAAI,CAACiE,GAAG,CAAC,CAAC,EAAEjE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG6D,YAAY,CAACC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;MAC3F,CAAC,MACI,IAAID,YAAY,CAACC,EAAE,GAAG,CAAC,EAAE;QAC1BzC,mBAAmB,CAAC/D,KAAK,CAACgE,OAAO,GAAGvB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACiE,GAAG,CAACjE,IAAI,CAACkE,GAAG,CAACJ,YAAY,CAACC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;MACjG;IACJ;IACAtC,kBAAkB,CAAC,CAAC;EACxB,CAAC;EACD,MAAM0C,qBAAqB,GAAGA,CAAA,KAAM;IAChC1D,OAAO,CAACL,OAAO,GAAGG,MAAM,CAACa,cAAc,CAAChB,OAAO,CAAC7C,KAAK,CAACmB,MAAM,CAAC;IAC7D0F,gBAAgB,CAAC,CAAC;EACtB,CAAC;EACD,MAAMC,qBAAqB,GAAGjL,OAAO,CAAC,MAAM;IACxC,OAAO,CAACkD,YAAY,IAAIA,YAAY,IAAIA,YAAY,IAAI,CAAC;EAC7D,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAClB,MAAMgI,YAAY,GAAGlL,OAAO,CAAC,MAAMiL,qBAAqB,GAAG/K,YAAY,CAACiL,MAAM,CAAC;IAC3EC,2BAA2B,EAAEZ,+BAA+B;IAC5Da,kBAAkB,EAAET,sBAAsB;IAC1CU,qBAAqB,EAAEP,qBAAqB;IAC5CQ,uBAAuB,EAAER;EAC7B,CAAC,CAAC,GAAG7K,YAAY,CAACiL,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAACjI,YAAY,EAAEqD,QAAQ,EAAEtB,YAAY,CAAC,CAAC;EAErE,MAAM+F,gBAAgB,GAAGA,CAACQ,OAAO,GAAG,CAAC,KAAK;IACtC,IAAI,CAACjI,UAAU,EAAE;MACb,MAAMkI,SAAS,GAAGhF,MAAM,GAAGQ,UAAU,CAACD,OAAO,GAAGlD,cAAc,GAAGoD,YAAY,GAAGrD,aAAa;MAC7F,IAAI6H,OAAO,GAAGrE,OAAO,CAACL,OAAO,IAAIyE,SAAS;MAC1C,MAAME,QAAQ,GAAGD,OAAO,GAAGzE,UAAU,CAACD,OAAO,GAAGE,YAAY;MAC5DI,MAAM,CAACG,QAAQ,CAACJ,OAAO,CAACL,OAAO,CAAC;MAChCK,OAAO,CAACL,OAAO,GAAGwE,OAAO,IAAIG,QAAQ;MACrCD,OAAO,GAAGrE,OAAO,CAACL,OAAO,IAAIyE,SAAS;MACtCG,wBAAwB,CAACF,OAAO,CAAC;MACjCvL,QAAQ,CAAC0L,MAAM,CAACvE,MAAM,EAAE;QACpBkE,OAAO,EAAEnE,OAAO,CAACL,OAAO;QACxB8E,KAAK,EAAEtK,KAAK;QACZuK,UAAU,EAAEtK,UAAU;QACtBuK,eAAe,EAAE;MACrB,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;QACX3I,iBAAiB,GAAGoI,OAAO,CAAC;QAC5BlF,WAAW,CAAC,MAAMa,OAAO,CAACL,OAAO,KAAKE,YAAY,GAAG3F,SAAS,CAAC8B,MAAM,GAAG9B,SAAS,CAACmF,IAAI,CAAC;MAC3F,CAAC,CAAC;MACFwF,WAAW,CAACR,OAAO,CAAC;IACxB;EACJ,CAAC;EACD,MAAME,wBAAwB,GAAG,MAAOnF,MAAM,IAAK;IAC/CyB,mBAAmB,CAAC/D,KAAK,CAACgE,OAAO,GAAG1B,MAAM,GAAG,CAAC,GAAG,CAAC;IAClD4B,kBAAkB,CAAC,CAAC;EACxB,CAAC;EACD,MAAM6D,WAAW,GAAIzF,MAAM,IAAK;IAC5Be,YAAY,CAACR,OAAO,CAACS,QAAQ,CAACN,MAAM,CAACc,aAAa,CAAC9D,KAAK,CAAChC,GAAG,CAAC,CAAC;IAC9D,IAAI,CAAC6B,UAAU,IAAI,CAACyC,MAAM,EAAE;MACxBtG,QAAQ,CAAC0L,MAAM,CAACrE,YAAY,CAACR,OAAO,EAAE;QAClCwE,OAAO,EAAE,CAAC;QACVM,KAAK,EAAEtK,KAAK,GAAG,EAAE;QACjBuK,UAAU,EAAE,CAAC;QACbC,eAAe,EAAE;MACrB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IACd;EACJ,CAAC;EACD,MAAME,aAAa,GAAGpM,WAAW,CAAC,MAAM;IACpCqM,UAAU,CAAC,MAAM;MAEb,IAAI3F,MAAM,EAAE;QACRuE,gBAAgB,CAAC9D,YAAY,CAAC;MAClC;IACJ,CAAC,EAAE,CAAC,CAAC;EACT,CAAC,EAAE,CAACT,MAAM,EAAES,YAAY,CAAC,CAAC;EAC1B,MAAMmF,sBAAsB,GAAGtM,WAAW,CAAC,MAAM;IAC7CiL,gBAAgB,CAACvE,MAAM,GAAGS,YAAY,GAAGD,UAAU,CAACD,OAAO,CAAC;EAChE,CAAC,EAAE,CAACP,MAAM,EAAEuE,gBAAgB,EAAE9D,YAAY,CAAC,CAAC;EAE5C,MAAMoF,iBAAiB,GAAGvM,WAAW,CAAC,CAACwM,MAAM,EAAEtG,KAAK,KAAK;IACrDzB,gBAAgB,GAAG+H,MAAM,EAAEtG,KAAK,CAAC;IACjC8D,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC,EAAE,CAACvF,gBAAgB,EAAEuF,UAAU,CAAC,CAAC;EAClC,MAAMyC,kBAAkB,GAAGzM,WAAW,CAAC,CAACwM,MAAM,EAAEtG,KAAK,KAAK;IACtDxB,iBAAiB,GAAG8H,MAAM,EAAEtG,KAAK,CAAC;IAClC8D,UAAU,CAAC,IAAI,CAAC;EACpB,CAAC,EAAE,CAACtF,iBAAiB,EAAEsF,UAAU,CAAC,CAAC;EACnC,MAAM0C,WAAW,GAAG1M,WAAW,CAAE2M,KAAK,IAAK;IACvC,IAAIzB,qBAAqB,EAAE;MACvBhI,OAAO,GAAGyJ,KAAK,CAACC,UAAU,EAAEvL,aAAa,CAACwL,SAAS,CAAC;IACxD;IACA,IAAI7I,eAAe,EAAE;MACjBoI,aAAa,CAAC,CAAC;IACnB;IACA7H,UAAU,GAAGoI,KAAK,CAAC;EACvB,CAAC,EAAE,CAACpI,UAAU,EAAEP,eAAe,EAAEoI,aAAa,EAAElB,qBAAqB,CAAC,CAAC;EACvE,MAAM4B,qBAAqB,GAAG9M,WAAW,CAACP,QAAQ,CAAEkN,KAAK,IAAK;IAC1D,MAAMI,OAAO,GAAGzN,KAAK,CAACqN,KAAK,CAAC;IAC5B,IAAII,OAAO,EAAE;MACT,MAAM7G,KAAK,GAAG6G,OAAO,CAAC7G,KAAK;MAC3B,IAAIA,KAAK,IAAIN,YAAY,CAACqB,OAAO,KAAKf,KAAK,EAAE;QACzCN,YAAY,CAACqB,OAAO,GAAGf,KAAK;QAC5B,MAAMD,IAAI,GAAG8G,OAAO,CAAC9G,IAAI;QACzB,IAAIA,IAAI,EAAE;UACNJ,WAAW,CAACoB,OAAO,GAAGhB,IAAI;QAC9B;QAEA,IAAIL,YAAY,CAACqB,OAAO,KAAKtB,QAAQ,CAAC1C,IAAI,CAAC,EAAE;UACzC,MAAMgH,IAAI,GAAGnE,WAAW,CAACiH,OAAO,EAAE9J,IAAI,CAAC;UACvC+G,UAAU,CAACC,IAAI,CAAC;QACpB;QAEAoC,UAAU,CAAC,MAAM;UAEb,MAAMW,cAAc,GAAG5G,uBAAuB,CAAC2G,OAAO,CAACH,UAAU,CAAC;UAClE,IAAII,cAAc,KAAKzG,aAAa,CAACU,OAAO,EAAE;YAC1CV,aAAa,CAACU,OAAO,GAAG+F,cAAc;YACtC9F,UAAU,CAACD,OAAO,GAAGL,aAAa,CAAC,CAAC;YACpC,IAAIF,MAAM,EAAE;cACRuE,gBAAgB,CAAC/D,UAAU,CAACD,OAAO,CAAC;YACxC;UACJ;QACJ,CAAC,EAAE,CAAC,CAAC;MACT;IACJ;EACJ,CAAC,EAAE,GAAG,EAAE;IAAEgG,QAAQ,EAAE,IAAI;IAAEC,OAAO,EAAE;EAAM,CAAC,CAAC,EAAE,CAACjK,IAAI,EAAE+G,UAAU,CAAC,CAAC;EAEhE,MAAMmD,YAAY,GAAGnN,WAAW,CAAEoN,SAAS,IAAK;IAC5C,IAAI7N,UAAU,CAACoF,WAAW,CAAC,EAAE;MACzB,OAAOA,WAAW,CAACyI,SAAS,CAAC;IACjC;IACA,OAAQ7L,OAAA,CAAChB,KAAK;MAAC8M,MAAM,EAAED,SAAS,KAAK,OAAO,GAAGzJ,qBAAqB,GAAGD,oBAAqB;MAACU,KAAK,EAAEA,KAAK,CAAC6C,OAAO,CAACqG,UAAW;MAAC1I,MAAM,EAAE,GAAGA,MAAM,IAAIwI,SAAS;IAAQ;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC;EAC1K,CAAC,EAAE,CAAC/I,WAAW,EAAEhB,qBAAqB,EAAED,oBAAoB,EAAEkB,MAAM,CAAC,CAAC;EACtE,MAAM+I,mBAAmB,GAAGA,CAAA,KAAM;IAC9B,OAAQpM,OAAA,CAAClB,IAAI;MAAC+D,KAAK,EAAEoE,aAAc;MAAAoF,QAAA,EACnCrM,OAAA,CAACT,aAAa;QAACwD,QAAQ,EAAEA,QAAS;QAACF,KAAK,EAAEA,KAAK,CAAC6C,OAAO,CAAC4G;MAAU;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC;EACT,CAAC;EACD,MAAMI,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,MAAMC,SAAS,GAAG,IAAIrO,KAAK,CAACuD,IAAI,CAAC,EAAE+K,QAAQ,CAAC,WAAW,CAAC;IACxD,OAAQzM,OAAA,CAACnB,QAAQ,CAACC,IAAI;MAAC4N,GAAG,EAAExL,MAAO;MAAC2B,KAAK,EAAE0E,mBAAoB;MAACoF,aAAa,EAAE,MAAO;MAAAN,QAAA,GACtFrM,OAAA,CAACjB,IAAI;QAAC6N,gBAAgB,EAAE,KAAM;QAAC/J,KAAK,EAAEA,KAAK,CAAC6C,OAAO,CAACmH,WAAY;QAAAR,QAAA,EAC7DG;MAAS;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EACNC,mBAAmB,CAAC,CAAC;IAAA;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACT,CAAC;EAClB,CAAC;EACD,MAAMW,UAAU,GAAGA,CAAA,KAAM;IACrB,OAAQ9M,OAAA,CAAClB,IAAI;MAAC+D,KAAK,EAAEA,KAAK,CAAC6C,OAAO,CAACqH,aAAc;MAACJ,aAAa,EAAE,UAAW;MAAAN,QAAA,EAC5ErM,OAAA,CAACf,gBAAgB;QAAC4D,KAAK,EAAEA,KAAK,CAAC6C,OAAO,CAACsH,IAAK;QAAC3J,MAAM,EAAE,GAAGA,MAAM,OAAQ;QAAC4J,OAAO,EAAElC,sBAAuB;QAACmC,OAAO,EAAExM;MAAY;QAAAsL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAA8C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxK,CAAC;EACT,CAAC;EACD,MAAMgB,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,aAAa,GAAG9K,iBAAiB,GAAG5C,IAAI,GAAGC,YAAY;IAC7D,OAAQK,OAAA,CAACnB,QAAQ,CAACC,IAAI;MAAC4N,GAAG,EAAEpG,mBAAoB;MAACzD,KAAK,EAAE2E,iBAAkB;MAACmF,aAAa,EAAExH,MAAM,GAAG,MAAM,GAAG,MAAO;MAAAkH,QAAA,EACnHrM,OAAA,CAACoN,aAAa,EAAA5G,MAAA,CAAAC,MAAA;QAACpD,MAAM,EAAE,GAAGA,MAAM,eAAgB;QAACN,QAAQ,EAAEA;MAAS,GAAKO,MAAM;QAAEjB,WAAW,EAAEC,iBAAiB,GAAG+K,SAAS,GAAG,KAAM;QAAC3H,OAAO,EAAEpD,iBAAiB,GAAGZ,IAAI,GAAG2L,SAAU;QAACzK,KAAK,EAAE2D,WAAY;QAAC1D,KAAK,EAAEF,aAAc;QAAC2K,YAAY,EAAE,IAAK;QAACtK,UAAU,EAAEmI,WAAY;QAACoC,2BAA2B;QACrSC,yBAAyB,EAAE;MAAsB;QAAAxB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACW,CAAC;EAClB,CAAC;EACD,MAAMsB,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,OAAQzN,OAAA,CAACP,YAAY,EAAA+G,MAAA,CAAAC,MAAA;MAACpD,MAAM,EAAE,GAAGA,MAAM,eAAgB;MAACX,UAAU,EAAEA,UAAW;MAACK,QAAQ,EAAEA,QAAS;MAACJ,aAAa,EAAEA,aAAc;MAACkB,cAAc,EAAEA;IAAe,GAAKP,MAAM;MAAEoC,OAAO,EAAEhE,IAAK;MAACkB,KAAK,EAAE2D,WAAY;MAACmG,GAAG,EAAErG,YAAa;MAACrD,UAAU,EAAEmI,WAAY;MAACI,qBAAqB,EAAEA,qBAAsB;MAACmC,aAAa;MAACC,aAAa,EAAExI,MAAO;MAAClC,UAAU,EAAE6D,gBAAiB;MAAC5D,gBAAgB,EAAE8H,iBAAkB;MAAC7H,iBAAiB,EAAE+H,kBAAmB;MAAC0C,aAAa,EAAE,CAAClL,UAAU,IAAIyC,MAAO;MAAC/B,WAAW,EAAEwI,YAAa;MAACiC,YAAY;MAACjM,YAAY,EAAEA,YAAa;MAACsG,WAAW,EAAED,YAAa;MAACpG,iBAAiB,EAAEA,iBAAkB;MAACiM,OAAO,EAAEzP,UAAU,CAACuB,OAAO;IAAE;MAAAoM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC;EACxoB,CAAC;EACD,OAAQnM,OAAA,CAAClB,IAAI;IAACuE,MAAM,EAAEA,MAAO;IAACR,KAAK,EAAE+E,cAAe;IAAAyE,QAAA,EACjD5I,mBAAmB,GAAIzD,OAAA,CAACR,QAAQ,EAAAgH,MAAA,CAAAC,MAAA;MAACpD,MAAM,EAAE,GAAGA,MAAM;IAAsB,GAAKC,MAAM;MAAEV,KAAK,EAAE2D,WAAY;MAACvD,UAAU,EAAEmI,WAAY;MAACyC,aAAa;MAACxK,WAAW,EAAEwI;IAAa;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,GAAKnM,OAAA,CAACnB,QAAQ,CAACC,IAAI,EAAA0H,MAAA,CAAAC,MAAA;MAACpD,MAAM,EAAE,GAAGA,MAAM,sBAAuB;MAACqJ,GAAG,EAAEtG,OAAQ;MAACvD,KAAK,EAAEiF;IAAa,GAAK8B,YAAY,CAACmE,WAAW;MAAA1B,QAAA,GACpSoB,kBAAkB,CAAC,CAAC,EACpBN,kBAAkB,CAAC,CAAC,EACpB,CAACjL,QAAQ,IAAI4K,UAAU,CAAC,CAAC,EACzB,CAACpK,UAAU,IAAI6J,oBAAoB,CAAC,CAAC;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzB;EAAE;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACf,CAAC;AACX,CAAC;AACD,eAAe3K,kBAAkB;AACjCA,kBAAkB,CAACwM,WAAW,GAAG,oBAAoB;AACrDxM,kBAAkB,CAACyM,YAAY,GAAG;EAC9BvL,UAAU,EAAE,IAAI;EAChBZ,eAAe,EAAE7B,SAAS,CAAC8B,MAAM;EACjCgB,QAAQ,EAAE,CAAC;EACXZ,oBAAoB,EAAE5B,UAAU;EAChC6B,qBAAqB,EAAE3B,WAAW;EAClC4B,WAAW,EAAE,IAAI;EACjBE,aAAa,EAAEjC,qBAAqB;EACpCkC,cAAc,EAAElC,qBAAqB;EACrCmC,eAAe,EAAE;AACrB,CAAC;AACDjB,kBAAkB,CAAC0M,SAAS,GAAGjO,SAAS","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}